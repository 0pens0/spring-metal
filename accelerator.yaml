accelerator:
  displayName: Spring Boot with AI LLM support
  description: The classic TAS demo application, a music catalog written in java/spring, now with AI LLM support!
  iconUrl: https://spring.io/img/projects/spring-cloud.svg
  tags:
  - spring 
  - java 
  - llm 

  options:

  - name: parentApp
    label: Business application
    inputType: text
    dataType: string

  - name: springAI
    dataType: boolean
    inputType: checkbox
    defaultValue: false
    label: Add LLM codebase with Spring AI
  - name: chatCode
    dataType: boolean
    defaultValue: false
    inputType: checkbox
    label: Chat codebase
    dependsOn:
      name: springAI
  - name: textImgCode
    dataType: boolean
    inputType: checkbox
    defaultValue: false
    label: Test-to-Image codebase
    dependsOn:
      name: springAI
  - name: embeddingCode
    dataType: boolean
    defaultValue: false
    inputType: checkbox
    label: Embeddings codebase
    dependsOn:
      name: springAI

  
      
  - name: vectorDB
    label: Vector Database
    inputType: select
    defaultValue: postgres
    choices:
      - value: postgres
        text: PostgresQL + PGVector
      - value: gpdb
        text: Greenplum
  
  - name: openAI
    label: AI service 
    defaultValue: openai
    inputType: select
    choices:
      - value: openai
        text: Open AI
      - value: vcf
        text: VCF Private AI
  

  #deployment type
  - name: appDeploymentType
    label: Deployment environment
    #description: Type of deployment configurations
    defaultValue: tap
    inputType: select
    choices:
    - value: tap
      text: Tanzu Platform for K8s
    - value: cf
      text: Tanzu Platform for VMs
      
engine:
  merge:
    #generic transformation
    - includes: ["**"]
      excludes: [ "accelerator.yaml"]
  
  #deployment configs per type
    - includes: [ "config/tap/*"]
      condition: "#appDeploymentType == 'tap'"
      chain:
        - type: YTT
    - includes: [ "config/cf/**"]
      condition: "#appDeploymentType == 'cf'"
      chain:
        - type: YTT